# 竞赛集训系统 - 详细开发计划

基于需求文档 `需求文档.txt` 制定

---

## 📋 项目概述

**系统类型**: 在线评测系统 (Online Judge System)  
**核心功能**: 代码提交、自动评测、排名统计、训练管理  
**用户规模**: 400-1000人/年  
**赛事规模**: 50场/年  

---

## ✅ 阶段零：基础架构（已完成）

- ✅ Vue3 + TypeScript + Vite 项目搭建
- ✅ Element Plus UI 组件库集成
- ✅ Pinia 状态管理
- ✅ Vue Router 路由管理
- ✅ Axios 请求封装
- ✅ 统一类型系统
- ✅ 路由守卫和权限控制
- ✅ 错误处理机制

---

## 🎯 阶段一：核心用户功能（2-3天）

### 1.1 用户注册与登录 ✅（已完成）
- ✅ 注册页面：邮箱、手机号、昵称、学号、密码
- ✅ 登录页面：邮箱/手机号登录
- ✅ Token 管理和持久化
- ✅ 路由守卫

### 1.2 用户注销功能 🔴（需实现）
**优先级**: 高  
**工作量**: 0.5天

**任务清单**:
- [ ] 在个人资料页面添加注销按钮
- [ ] 创建注销确认对话框
- [ ] 调用 `/user/deactivate` 接口
- [ ] 注销后清除本地数据并跳转到登录页
- [ ] 显示注销成功提示

**交付物**:
- `src/views/participant/MyProfile.vue` 更新

### 1.3 个人资料管理 🔴（需完善）
**优先级**: 中  
**工作量**: 1天

**任务清单**:
- [ ] 完善个人资料展示页面
  - 显示：邮箱、手机号、昵称、学号、角色、注册时间
- [ ] 实现个人信息编辑功能
  - 可编辑：昵称、手机号
- [ ] 实现密码修改功能
  - 旧密码验证
  - 新密码确认
- [ ] 显示参赛历史统计
  - 参与赛事次数
  - 解题总数
  - 总罚时

**交付物**:
- `src/views/participant/MyProfile.vue` 完整实现
- 个人信息编辑对话框组件

---

## 🏆 阶段二：赛事管理功能（3-4天）

### 2.1 赛事列表与筛选 ✅（已完成）
- ✅ 赛事列表展示（分页）
- ✅ 按可见性、状态筛选
- ✅ 关键字搜索

### 2.2 赛事创建与编辑 ✅（已完成）
- ✅ 创建赛事（教师）
- ✅ 编辑赛事（教师）
- ✅ 选择题目（1-10道）

### 2.3 赛事删除逻辑 🟡（需完善）
**优先级**: 中  
**工作量**: 0.5天

**任务清单**:
- [ ] 实现赛事删除前的状态检查
  - 未开始：直接删除
  - 进行中：不允许删除，显示提示
  - 已结束：标记为不显示（软删除）
- [ ] 添加删除确认对话框，显示赛事状态信息

**交付物**:
- `src/views/contest/list.vue` 更新删除逻辑

### 2.4 赛事详情页 🔴（需实现）
**优先级**: 高  
**工作量**: 2天

**任务清单**:
- [ ] 创建赛事详情页面 `src/views/contest/detail.vue`
- [ ] 显示赛事基本信息
  - 名称、介绍、时间、可见性、参赛人数
- [ ] 显示题目列表
  - 题目编号（A、B、C...）
  - 题目名称、时间限制、内存限制
  - 点击跳转到题目详情
- [ ] 根据赛事状态显示不同操作
  - 未开始：显示倒计时
  - 进行中：显示"开始答题"按钮
  - 已结束：显示"查看排名"和"查看题解"
- [ ] 学生参赛功能
  - 公开赛事：直接参加
  - 私密赛事：输入密码参加
  - 显示参赛状态

**交付物**:
- `src/views/contest/detail.vue` 完整实现
- 参赛确认组件

### 2.5 赛事参与入口 🔴（需实现）
**优先级**: 高  
**工作量**: 1天

**任务清单**:
- [ ] 在赛事详情页添加"进入赛事"按钮
- [ ] 创建赛事答题页面
  - 左侧：题目列表导航
  - 右侧：题目详情和提交区域
- [ ] 显示赛事剩余时间倒计时
- [ ] 实现题目之间的切换

**交付物**:
- `src/views/contest/arena.vue` 赛事答题页面

---

## 📚 阶段三：题库管理功能（4-5天）

### 3.1 题目列表 ✅（基本完成）
- ✅ 题目列表展示
- ✅ 筛选和搜索
- ✅ 显示/隐藏切换

### 3.2 题目创建 🔴（需实现）
**优先级**: 高  
**工作量**: 2天

**任务清单**:
- [ ] 创建题目创建/编辑页面 `src/views/problem/create.vue`
- [ ] 实现表单
  - 题目名称（唯一性校验）
  - 题目描述（富文本编辑器）
  - 输入说明、输出说明
  - 输入样例、输出样例
  - 备注
  - 时间限制（ms）、内存限制（MB）
- [ ] 实现测试数据上传
  - ZIP 文件上传组件
  - 文件大小限制（建议 10MB）
  - 上传进度显示
  - 上传成功后显示文件信息
- [ ] 表单验证
  - 所有必填项检查
  - 名称唯一性检查
  - 数值范围检查
- [ ] 保存和发布功能

**交付物**:
- `src/views/problem/create.vue` 完整实现
- 文件上传组件 `src/components/FileUpload.vue`
- 富文本编辑器组件（可使用 TinyMCE 或 Quill）

### 3.3 题目编辑 🔴（需实现）
**优先级**: 高  
**工作量**: 1天

**任务清单**:
- [ ] 复用创建页面，根据 ID 加载题目数据
- [ ] 实现题目信息更新
- [ ] 实现测试数据增加功能
  - 显示已有测试数据列表
  - 只能增加，不能删除或修改
  - 版本号管理
- [ ] 保存时的验证逻辑

**交付物**:
- `src/views/problem/create.vue` 支持编辑模式

### 3.4 题目详情页 🔴（需实现）
**优先级**: 高  
**工作量**: 1.5天

**任务清单**:
- [ ] 创建题目详情页 `src/views/problem/detail.vue`
- [ ] 显示题目完整信息
  - 题目描述（HTML渲染）
  - 输入/输出说明
  - 输入/输出样例（代码块格式）
  - 时间/内存限制
  - 题目来源和创建者
- [ ] 显示题目统计
  - 提交次数、通过次数、通过率
  - 最近提交记录
- [ ] 操作按钮
  - 学生：提交代码
  - 教师：编辑题目、查看题解、发布题解
- [ ] 相关题目推荐（可选）

**交付物**:
- `src/views/problem/detail.vue` 完整实现

### 3.5 题目删除逻辑 🟡（需完善）
**优先级**: 中  
**工作量**: 0.5天

**任务清单**:
- [ ] 检查题目是否在赛事中使用
- [ ] 未使用：直接删除
- [ ] 已使用：只隐藏，不删除
- [ ] 显示明确的提示信息

**交付物**:
- `src/views/problem/list.vue` 更新删除逻辑

### 3.6 题解管理 🟡（需实现）
**优先级**: 中  
**工作量**: 1.5天

**任务清单**:
- [ ] 创建题解管理页面 `src/views/problem/solution.vue`
- [ ] 教师发布题解功能
  - 题解标题
  - 题解内容（富文本）
  - 发布/草稿状态
- [ ] 题解列表展示
  - 显示所有题解
  - 支持编辑和删除
- [ ] 学生查看题解
  - 只能查看已发布的题解
  - Markdown 或 HTML 渲染

**交付物**:
- `src/views/problem/solution.vue` 完整实现
- 题解查看组件

---

## 💻 阶段四：代码提交与评测（4-5天）

### 4.1 代码提交页面 🔴（需实现）
**优先级**: 高  
**工作量**: 2天

**任务清单**:
- [ ] 创建代码提交页面 `src/views/problem/submit.vue`
- [ ] 代码编辑器集成
  - 使用 Monaco Editor（VSCode编辑器）
  - 支持多语言语法高亮
  - 代码自动补全
  - 主题切换（亮/暗）
- [ ] 语言选择器
  - C、C++、Java、Python、Go 等
  - 每种语言显示对应的编译器版本
- [ ] 提交前检查
  - 代码不能为空
  - 代码长度限制
- [ ] 提交按钮和状态
  - 提交中：显示加载状态
  - 提交成功：显示评测结果
  - 提交失败：显示错误信息
- [ ] 实时评测结果显示
  - 评测状态（Pending、Judging、Finished）
  - 评测结果（AC/WA/RE等）
  - 所用时间和内存

**交付物**:
- `src/views/problem/submit.vue` 完整实现
- Monaco Editor 配置文件

### 4.2 提交记录列表 🔴（需实现）
**优先级**: 高  
**工作量**: 1.5天

**任务清单**:
- [ ] 创建提交记录页面 `src/views/submission/list.vue`
- [ ] 提交记录列表
  - 显示：提交ID、题目、用户、语言、结果、时间、内存、提交时间
  - 支持筛选：赛事、题目、用户、结果、语言
  - 支持排序
  - 分页显示
- [ ] 颜色标记
  - AC：绿色
  - WA/RE/CE：红色
  - TLE/MLE：黄色
- [ ] 点击查看详情

**交付物**:
- `src/views/submission/list.vue` 完整实现

### 4.3 提交详情页 🔴（需实现）
**优先级**: 高  
**工作量**: 1.5天

**任务清单**:
- [ ] 创建提交详情页 `src/views/submission/detail.vue`
- [ ] 显示提交信息
  - 题目信息
  - 用户信息
  - 提交时间
  - 代码语言和编译器
  - 评测结果
- [ ] 代码展示
  - 语法高亮
  - 行号显示
  - 代码长度统计
- [ ] 测试点结果
  - 每个测试点的详细结果
  - 运行时间和内存
  - 错误信息（如果有）
  - 通过/总数统计
- [ ] 评测日志下载（可选）

**交付物**:
- `src/views/submission/detail.vue` 完整实现
- 测试点结果组件 `src/components/TestCaseResults.vue`（已存在，需完善）

---

## 📊 阶段五：排名系统（2-3天）

### 5.1 赛事实时排名 🔴（需实现）
**优先级**: 高  
**工作量**: 2天

**任务清单**:
- [ ] 创建赛事排名页面 `src/views/contest/ranking.vue`
- [ ] 实时排名列表
  - 排名、用户昵称、解题数、罚时
  - 每道题的状态（AC、尝试次数、用时）
  - 自动刷新（WebSocket 或轮询）
- [ ] 排名规则实现
  - 先按解题数降序
  - 再按罚时升序
  - 罚时计算：AC用时 + 20分钟 × 错误次数
- [ ] 排名可视化
  - 表格形式
  - 颜色标记（AC/未AC/未尝试）
  - 首次通过标记（First Blood）
- [ ] 排名导出功能（可选）

**交付物**:
- `src/views/contest/ranking.vue` 完整实现

### 5.2 排名详细信息 🟡（需实现）
**优先级**: 中  
**工作量**: 1天

**任务清单**:
- [ ] 点击用户查看详细信息
- [ ] 显示用户在每道题上的提交历史
  - 提交时间
  - 评测结果
  - 用时和内存
- [ ] 显示用户的解题趋势图（可选）

**交付物**:
- 排名详情对话框组件

---

## 🎓 阶段六：训练计划系统（3-4天）

### 6.1 训练计划管理 🔴（需实现）
**优先级**: 中  
**工作量**: 2天

**任务清单**:
- [ ] 创建训练计划列表页 `src/views/training/list.vue`
- [ ] 训练计划创建页面 `src/views/training/create.vue`
  - 计划名称和描述
  - 开始/结束时间
  - 选择参与学生（多选）
  - 添加赛事安排（8-15场）
    - 赛事选择
    - 顺序排列
    - 计划时间
- [ ] 训练计划编辑
  - 只能修改未开始的部分
  - 已开始的部分显示为只读
- [ ] 训练计划删除
  - 未开始：直接删除
  - 已开始：不允许删除

**交付物**:
- `src/views/training/list.vue`
- `src/views/training/create.vue`

### 6.2 训练计划详情 🟡（需实现）
**优先级**: 中  
**工作量**: 1.5天

**任务清单**:
- [ ] 创建训练计划详情页 `src/views/training/detail.vue`
- [ ] 显示计划信息
  - 基本信息
  - 参与学生列表
  - 赛事安排时间线
- [ ] 显示学生进度
  - 已参与/总赛事数
  - 总解题数
  - 总罚时
  - 参与率统计
- [ ] 赛事快速入口
  - 点击赛事跳转到赛事页面

**交付物**:
- `src/views/training/detail.vue`
- 学生进度统计组件

---

## 📈 阶段七：积分榜系统（2-3天）

### 7.1 多赛事统计 🟡（需实现）
**优先级**: 中  
**工作量**: 2天

**任务清单**:
- [ ] 创建积分榜页面 `src/views/scoreboard/index.vue`
- [ ] 赛事选择器
  - 多选赛事（复选框）
  - 显示赛事名称和时间
  - 快速选择（本周、本月、所有）
- [ ] 统计数据展示
  - 学生昵称、学号
  - 所选赛事次数
  - 参与赛事次数
  - 总解题数
  - 总罚时
  - 平均解题数
- [ ] 排序功能
  - 可按任意列排序
- [ ] 数据导出
  - 导出为 Excel 或 CSV

**交付物**:
- `src/views/scoreboard/index.vue`
- 数据导出工具函数

### 7.2 可视化统计图表 🟢（可选）
**优先级**: 低  
**工作量**: 1天

**任务清单**:
- [ ] 集成图表库（ECharts）
- [ ] 学生表现趋势图
- [ ] 题目通过率分布
- [ ] 赛事参与度统计

**交付物**:
- 图表组件

---

## 👨‍💼 阶段八：管理员功能（1-2天）

### 8.1 用户管理 🟡（需完善）
**优先级**: 中  
**工作量**: 1天

**任务清单**:
- [ ] 完善用户管理页面 `src/views/admin/UserManagement.vue`
- [ ] 用户列表展示
  - 显示：ID、昵称、学号、邮箱、角色、状态、注册时间
  - 筛选：角色、状态、关键字
  - 分页
- [ ] 用户操作
  - 查看详情
  - 修改角色（管理员功能）
  - 启用/禁用账户
  - 重置密码（可选）

**交付物**:
- `src/views/admin/UserManagement.vue` 完善实现

### 8.2 系统设置 🟢（可选）
**优先级**: 低  
**工作量**: 1天

**任务清单**:
- [ ] 系统配置页面
- [ ] 公告管理
- [ ] 数据备份和导出

---

## 🎨 阶段九：UI优化与体验提升（2-3天）

### 9.1 响应式适配 🟡
**优先级**: 中  
**工作量**: 1天

**任务清单**:
- [ ] 移动端适配（平板、手机）
- [ ] 关键页面响应式优化
  - 赛事列表
  - 题目详情
  - 提交页面

### 9.2 交互优化 🟡
**优先级**: 中  
**工作量**: 1天

**任务清单**:
- [ ] 加载动画优化
- [ ] 骨架屏实现
- [ ] 空状态页面
- [ ] 错误状态页面

### 9.3 性能优化 🟡
**优先级**: 中  
**工作量**: 1天

**任务清单**:
- [ ] 路由懒加载检查
- [ ] 图片懒加载
- [ ] 代码分包优化
- [ ] 接口请求优化（防抖、节流）

---

## 🧪 阶段十：测试与部署（2-3天）

### 10.1 功能测试 🔴
**优先级**: 高  
**工作量**: 1.5天

**任务清单**:
- [ ] 用户流程测试
  - 注册 → 登录 → 参赛 → 提交 → 查看结果
- [ ] 教师流程测试
  - 创建题目 → 创建赛事 → 查看排名 → 发布题解
- [ ] 边界情况测试
  - 时间边界（赛事开始/结束）
  - 权限边界（角色权限）
  - 数据边界（大数据量）

### 10.2 部署准备 🟡
**优先级**: 中  
**工作量**: 1天

**任务清单**:
- [ ] 生产环境配置
- [ ] 构建优化
- [ ] 静态资源 CDN 配置（可选）
- [ ] 部署文档编写

---

## 📊 开发计划时间表

| 阶段 | 工作量 | 优先级 | 开始日期 | 预计完成 |
|------|--------|--------|----------|----------|
| 阶段一：核心用户功能 | 1.5天 | 🔴 高 | Day 1 | Day 2 |
| 阶段二：赛事管理 | 3天 | 🔴 高 | Day 2 | Day 5 |
| 阶段三：题库管理 | 5天 | 🔴 高 | Day 5 | Day 10 |
| 阶段四：代码提交评测 | 5天 | 🔴 高 | Day 10 | Day 15 |
| 阶段五：排名系统 | 3天 | 🔴 高 | Day 15 | Day 18 |
| 阶段六：训练计划 | 3天 | 🟡 中 | Day 18 | Day 21 |
| 阶段七：积分榜 | 2天 | 🟡 中 | Day 21 | Day 23 |
| 阶段八：管理员功能 | 1天 | 🟡 中 | Day 23 | Day 24 |
| 阶段九：UI优化 | 3天 | 🟡 中 | Day 24 | Day 27 |
| 阶段十：测试部署 | 2.5天 | 🔴 高 | Day 27 | Day 30 |

**总计工作量**: 约 30 个工作日（6周）

---

## 🎯 里程碑

### Milestone 1: MVP（最小可用产品）- Day 15
- ✅ 用户注册登录
- ✅ 题目创建和浏览
- ✅ 代码提交和评测
- ✅ 基本排名功能

### Milestone 2: 核心功能完善 - Day 21
- ✅ 赛事完整流程
- ✅ 题解系统
- ✅ 训练计划
- ✅ 详细排名

### Milestone 3: 系统完善 - Day 30
- ✅ 积分榜统计
- ✅ 管理员功能
- ✅ UI/UX 优化
- ✅ 测试和部署

---

## 📦 技术栈补充

### 新增依赖建议
```json
{
  "monaco-editor": "^0.50.0",           // 代码编辑器
  "highlight.js": "^11.9.0",            // 代码高亮
  "@wangeditor/editor": "^5.1.23",      // 富文本编辑器
  "echarts": "^5.5.0",                  // 图表库（可选）
  "xlsx": "^0.18.5",                    // Excel导出（可选）
  "dayjs": "^1.11.10"                   // 日期处理
}
```

---

## ⚠️ 风险与注意事项

### 技术风险
1. **Monaco Editor 集成**: 需要特殊的 Vite 配置
2. **WebSocket 实时排名**: 需要后端支持，可先用轮询
3. **大文件上传**: 测试数据 ZIP 文件可能较大

### 业务风险
1. **并发评测**: 高并发时评测队列管理
2. **数据一致性**: 排名实时更新的准确性
3. **权限控制**: 学生不能看到测试数据

### 建议
1. **优先实现核心流程**: 从用户注册到代码提交的完整链路
2. **分离前后端开发**: 使用 Mock 数据或 API 文档先行开发
3. **持续集成**: 每完成一个模块就进行功能测试
4. **代码审查**: 关键功能需要 Code Review

---

## 📚 附录：页面清单

### 需新建的页面（按优先级）

#### 🔴 高优先级
1. `src/views/contest/detail.vue` - 赛事详情
2. `src/views/contest/arena.vue` - 赛事答题页
3. `src/views/contest/ranking.vue` - 赛事排名
4. `src/views/problem/create.vue` - 题目创建/编辑
5. `src/views/problem/detail.vue` - 题目详情
6. `src/views/problem/submit.vue` - 代码提交
7. `src/views/submission/list.vue` - 提交记录
8. `src/views/submission/detail.vue` - 提交详情

#### 🟡 中优先级
9. `src/views/problem/solution.vue` - 题解管理
10. `src/views/training/list.vue` - 训练计划列表
11. `src/views/training/create.vue` - 训练计划创建
12. `src/views/training/detail.vue` - 训练计划详情
13. `src/views/scoreboard/index.vue` - 积分榜

#### 🟢 低优先级
14. `src/views/admin/settings.vue` - 系统设置

### 需新建的组件
1. `src/components/CodeEditor.vue` - 代码编辑器
2. `src/components/FileUpload.vue` - 文件上传
3. `src/components/RichTextEditor.vue` - 富文本编辑器
4. `src/components/Countdown.vue` - 倒计时组件
5. `src/components/StatusBadge.vue` - 状态标签
6. `src/components/ProblemSelector.vue` - 题目选择器
7. `src/components/StudentSelector.vue` - 学生选择器

---

**文档版本**: v1.0  
**制定日期**: 2025-10-17  
**制定人**: AI Assistant

