import{d as P,r as p,c as x,a as i,b as l,w as a,e as d,h,i as f,j as R,E as v,f as C,o as N,_ as q}from"./index-jbbSaPHq.js";const I={class:"register-page"},U={class:"login-link"},k=P({__name:"index",setup(B){const g=C(),u=p(),o=p({nickname:"",studentId:"",email:"",phoneNumber:"",password:"",confirmPassword:""}),m=p(!1),_={nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],studentId:[{required:!0,message:"请输入学号",trigger:"blur"}],email:[{required:!0,validator:(n,e,r)=>{e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?r():r(new Error("请输入正确的邮箱格式")):r(new Error("请输入邮箱"))},trigger:"blur"}],phoneNumber:[{required:!0,validator:(n,e,r)=>{e?/^1[3-9]\d{9}$/.test(e)?r():r(new Error("请输入正确的手机号格式")):r(new Error("请输入手机号"))},trigger:"blur"}],password:[{required:!0,validator:(n,e,r)=>{e?e.length<6?r(new Error("密码长度至少6位")):r():r(new Error("请输入密码"))},trigger:"blur"}],confirmPassword:[{required:!0,validator:(n,e,r)=>{e?e!==o.value.password?r(new Error("两次输入的密码不一致")):r():r(new Error("请再次输入密码"))},trigger:"blur"}]},w=async()=>{u.value&&await u.value.validate(async n=>{if(n){m.value=!0;try{const{confirmPassword:e,...r}=o.value;await R(r),v.success("注册成功，请登录"),g.push({name:"Login"})}catch(e){v.error(e?.message||"注册失败")}finally{m.value=!1}}})},b=()=>{g.push({name:"Login"})};return(n,e)=>{const r=d("el-input"),t=d("el-form-item"),c=d("el-button"),V=d("el-link"),E=d("el-form"),y=d("el-card");return N(),x("div",I,[e[10]||(e[10]=i("div",{class:"register-hero"},[i("h1",null,"Contest Hub"),i("p",null,"创建新账号，开始您的竞赛集训之旅")],-1)),l(y,{class:"register-card",shadow:"always"},{default:a(()=>[e[9]||(e[9]=i("h2",{class:"register-title"},"账号注册",-1)),l(E,{ref_key:"registerFormRef",ref:u,model:o.value,rules:_,onSubmit:h(w,["prevent"]),"label-position":"top"},{default:a(()=>[l(t,{label:"昵称",prop:"nickname"},{default:a(()=>[l(r,{modelValue:o.value.nickname,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.nickname=s),placeholder:"请输入昵称",clearable:""},null,8,["modelValue"])]),_:1}),l(t,{label:"学号",prop:"studentId"},{default:a(()=>[l(r,{modelValue:o.value.studentId,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.studentId=s),placeholder:"请输入学号",clearable:""},null,8,["modelValue"])]),_:1}),l(t,{label:"邮箱",prop:"email"},{default:a(()=>[l(r,{modelValue:o.value.email,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.email=s),placeholder:"请输入邮箱",clearable:""},null,8,["modelValue"])]),_:1}),l(t,{label:"手机号",prop:"phoneNumber"},{default:a(()=>[l(r,{modelValue:o.value.phoneNumber,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.phoneNumber=s),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),l(t,{label:"密码",prop:"password"},{default:a(()=>[l(r,{modelValue:o.value.password,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.password=s),type:"password",placeholder:"请输入密码（至少6位）","show-password":""},null,8,["modelValue"])]),_:1}),l(t,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[l(r,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.confirmPassword=s),type:"password",placeholder:"请再次输入密码","show-password":""},null,8,["modelValue"])]),_:1}),l(t,{class:"register-actions"},{default:a(()=>[l(c,{type:"primary",loading:m.value,onClick:w,round:""},{default:a(()=>[...e[6]||(e[6]=[f("立即注册",-1)])]),_:1},8,["loading"])]),_:1}),i("div",U,[e[8]||(e[8]=f(" 已有账号？",-1)),l(V,{type:"primary",onClick:b},{default:a(()=>[...e[7]||(e[7]=[f("立即登录",-1)])]),_:1})])]),_:1},8,["model"])]),_:1})])}}}),j=q(k,[["__scopeId","data-v-1f54bb6d"]]);export{j as default};
