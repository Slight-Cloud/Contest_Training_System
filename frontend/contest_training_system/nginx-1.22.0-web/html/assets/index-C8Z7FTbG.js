import{d as k,u as x,r as f,c as C,a as n,b as o,w as s,e as a,f as P,g as O,o as R,h as U,i as p,E as g,_ as B}from"./index-jbbSaPHq.js";const E={class:"login-page"},N={class:"register-link"},S=k({__name:"index",setup(L){const r=P(),v=O(),m=x(),l=f({emailOrPhone:"",password:""}),i=f(!1),c=async()=>{if(!l.value.emailOrPhone||!l.value.password){g.warning("请输入账号和密码");return}try{i.value=!0,await m.userLogin({...l.value}),await m.fetchUserProfile();const t=v.query.redirect;t&&t!=="/login"?r.push(t):r.push("/")}catch(t){g.error(t?.message||"登录失败")}finally{i.value=!1}},w=()=>{r.push({name:"Register"})};return(t,e)=>{const _=a("el-input"),u=a("el-form-item"),b=a("el-button"),y=a("el-link"),h=a("el-form"),V=a("el-card");return R(),C("div",E,[e[6]||(e[6]=n("div",{class:"login-hero"},[n("h1",null,"Contest Hub"),n("p",null,"欢迎使用竞赛系统")],-1)),o(V,{class:"login-card",shadow:"always"},{default:s(()=>[e[5]||(e[5]=n("h2",{class:"login-title"},"账号登录",-1)),o(h,{model:l.value,onSubmit:U(c,["prevent"]),"label-position":"top"},{default:s(()=>[o(u,{label:"账号"},{default:s(()=>[o(_,{modelValue:l.value.emailOrPhone,"onUpdate:modelValue":e[0]||(e[0]=d=>l.value.emailOrPhone=d),placeholder:"请输入邮箱或手机号",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{label:"密码"},{default:s(()=>[o(_,{modelValue:l.value.password,"onUpdate:modelValue":e[1]||(e[1]=d=>l.value.password=d),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),o(u,{class:"login-actions"},{default:s(()=>[o(b,{type:"primary",loading:i.value,onClick:c,round:""},{default:s(()=>[...e[2]||(e[2]=[p("立即登录",-1)])]),_:1},8,["loading"])]),_:1}),n("div",N,[e[4]||(e[4]=p(" 还没有账号？",-1)),o(y,{type:"primary",onClick:w},{default:s(()=>[...e[3]||(e[3]=[p("立即注册",-1)])]),_:1})])]),_:1},8,["model"])]),_:1})])}}}),T=B(S,[["__scopeId","data-v-4cd42a95"]]);export{T as default};
